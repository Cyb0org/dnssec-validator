<!-- ***** BEGIN LICENSE BLOCK *****
Copyright 2013 CZ.NIC, z.s.p.o.

Authors: Martin Straka <martin.straka@nic.cz>

This file is part of DNSSEC Validator 2.0 Add-on.

DNSSEC Validator 2.0 Add-on is free software: you can redistribute it and/or
modify it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or (at your
option) any later version.

DNSSEC Validator 2.0 Add-on is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
more details.

You should have received a copy of the GNU General Public License along with
DNSSEC Validator 2.0 Add-on.  If not, see <http://www.gnu.org/licenses/>.
***** END LICENSE BLOCK ***** -->


<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>DNSSEC/TLSA Validator</title>
<script type="text/javascript"> 

function deregisterPopover () {
    for (t in safari.extension.toolbarItems) {
        if (safari.extension.toolbarItems[t].identifier === "DNSSECbutton") {
            safari.extension.toolbarItems[t].popover.hide();
            // Deregister the popover from the toolbar button
            safari.extension.toolbarItems[t].popover = null;
        }
    }
}
 
// Find the popover that holds the NPAPI plugin
for (t in safari.extension.toolbarItems) {
    if (safari.extension.toolbarItems[t].identifier === "DNSSECbutton") {
        safari.extension.toolbarItems[t].showPopover();
        safari.extension.toolbarItems[t].popover.hide();
        var NpapiPlugin = safari.extension.toolbarItems[t].popover.contentWindow.getPlugin();
        
        var domain = "www.nic.cz";	 	
      	var result = NpapiPlugin.Validate(domain, 2, "8.8.8.8", "1.1.1.1");
        console.log("Validator result: " + result[0] + "; " + result[1]);

        
    }
}

</script>
</head>
<body>
ghjdghjgdhjghjghjghjdgh dhj dghjdgh jdgh
</body>
</html>
